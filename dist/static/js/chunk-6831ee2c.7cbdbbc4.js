(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6831ee2c"],{"0808":function(e,t,i){},"2bd9":function(e,t,i){},"657c":function(e,t,i){"use strict";function n(e,t,i){var n;n=i.response?"".concat(i.response.error||i.response):i.responseText?"".concat(i.responseText):"fail to post ".concat(e," ").concat(i.status);var a=new Error(n);return a.status=i.status,a.method="post",a.url=e,a}function a(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(i){return t}}function r(e){if("undefined"!==typeof XMLHttpRequest){var t=new XMLHttpRequest,i=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var r=new FormData;e.data&&Object.keys(e.data).forEach((function(t){r.append(t,e.data[t])})),r.append(e.filename,e.file,e.file.name),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(n(i,e,t));e.onSuccess(a(t))},t.open("post",i,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var o=e.headers||{};for(var s in o)o.hasOwnProperty(s)&&null!==o[s]&&t.setRequestHeader(s,o[s]);return t.send(r),t}}var o=function(e){return(navigator.language||navigator.browserLanguage).includes("zh")},s=o?"zh":"en",l={readonlyTipText:{zh:"不可更改",en:"Readonly"},bottomText:{zh:"点击或拖拽图片以修改",en:"Drop file here or click to change"},hoverText:{zh:"点击或拖拽图片以修改",en:"Drop file here or click to change"},placeholder:{zh:"点击或拖拽选择图片",en:"Drop file here or click"},noMultipleFileMsg:{zh:"不支持多文件",en:"Not support multiple files"},exceedSizeMsg:{zh:"文件大小不能超过",en:"The size of file should less than: "},noActionUrlMsg:{zh:"上传地址未配置",en:"Action hasn't set up yet"}},u={name:"VueImgInputer",props:{type:{default:"img",type:String},accept:{default:"image/*,video/*",type:String},capture:{default:!1,type:Boolean},id:{default:"",type:String},onChange:{default:null,type:Function},readonly:{type:Boolean,default:!1},noMultipleText:{default:l.noMultipleFileMsg[s],type:String},exceedSizeText:{default:l.exceedSizeMsg[s],type:String},noActionText:{default:l.noActionUrlMsg[s],type:String},readonlyTipText:{default:l.readonlyTipText[s],type:String},bottomText:{default:l.bottomText[s],type:String},hoverText:{default:l.hoverText[s],type:String},placeholder:{default:l.placeholder[s],type:String},value:{default:void 0},icon:{default:"",type:String},aliIcon:{default:"",type:String},customIconClass:{default:"",type:String},maxSize:{default:5120,type:Number},size:{default:"",type:String},imgSrc:{default:"",type:String},nhe:{type:Boolean,default:!1},noHoverEffect:{type:Boolean,default:!1},noMask:{type:Boolean,default:!1},theme:{type:String,default:""},name:{type:String,default:"file"},autoUpload:{type:Boolean,default:!1},action:{type:String,default:void 0},uploadKey:{type:String,default:"file"},extraData:{type:Object,default:function(){}},headers:{type:Object,default:function(){}},withCookie:{type:Boolean,default:!1},onStart:{default:function(){},type:Function},onProgress:{default:function(){},type:Function},onSuccess:{default:function(){},type:Function},onError:{default:function(){},type:Function}},data:function(){return{inputId:"",file:null,dataUrl:"",fileName:"",errText:"",uploading:!1,uploadPercent:0,uploaded:!1,uploadFailed:!1}},computed:{imgSelected:function(){return!!this.dataUrl||!!this.fileName},sizeHumanRead:function(){var e=0;return e=this.maxSize<1024?this.maxSize+"K":(this.maxSize/1024).toFixed(this.maxSize%1024>0?2:0)+"M",e},sizeClass:function(){if(this.size)return"img-inputer--".concat(this.size)},themeClass:function(){return"img-inputer--".concat(this.theme)},ICON:function(){var e="",t=this.theme,i=this.icon,n=this.autoUpload;return e=i||("light"===t?"img-light":n?"upload":"clip"),e},processStyle:function(){var e=this.uploadPercent;return{transform:"translate3d(".concat(e-100,"%, 0, 0)")}}},mounted:function(){var e=this;this.inputId=this.id||this.gengerateID(),this.imgSrc&&(this.dataUrl=this.imgSrc),["dragleave","drop","dragenter","dragover"].forEach((function(t){e.preventDefaultEvent(t)})),this.addDropSupport()},methods:{preventDefaultEvent:function(e){document.addEventListener(e,(function(e){e.preventDefault()}),!1)},addDropSupport:function(){var e=this,t=this.$refs.box;t.addEventListener("drop",(function(t){if(t.preventDefault(),e.readonly)return!1;e.errText="";var i=t.dataTransfer.files;return 0!==i.length&&(i.length>1?(e.errText=e.noMultipleText,!1):void e.handleFileChange(i))}))},gengerateID:function(){var e=Math.random().toString(36).substring(3,8);return document.getElementById(e)?this.gengerateID():e},handleFileChange:function(e){"undefined"===typeof e.target?this.file=e[0]:this.file=e.target.files[0],this.errText="";var t=Math.floor(this.file.size/1024);if(t>this.maxSize)return this.errText="".concat(this.exceedSizeText).concat(this.sizeHumanRead),this.$emit("onExceed",this.file),!1;this.$emit("input",this.file),this.autoUpload&&this.uploadFile(),this.onChange&&this.onChange(this.file,this.file.name),this.$emit("onChange",this.file,this.file.name),this.imgPreview(this.file),this.fileName=this.file.name,this.resetInput()},imgPreview:function(e){var t=this;if(e&&window.FileReader&&/^image/.test(e.type)){var i=new FileReader;i.readAsDataURL(e),i.onloadend=function(){t.dataUrl=this.result}}},resetInput:function(){var e=document.getElementById(this.inputId),t=document.createElement("form");document.body.appendChild(t);var i,n=e.parentNode,a=n.lastChild===e;a||(i=e.nextSibling),t.appendChild(e),t.reset(),a?n.appendChild(e):n.insertBefore(e,i),document.body.removeChild(t)},uploadFile:function(){var e=this.onStart,t=this.file;this.action?(e&&e(t),this.post(t)):this.errText=this.noActionText},post:function(e){var t=this,i=this.headers,n=this.withCookie,a=this.extraData,o=this.uploadKey,s=this.action;this.uploading=!0;var l={headers:i,withCredentials:n,file:e,data:a,filename:o,action:s,onProgress:function(i){t.uploadPercent=~~i.percent,t.onProgress(i,e)},onSuccess:function(i){t.uploadPercent=0,t.uploading=!1,t.uploaded=!0,t.onSuccess(i,e)},onError:function(i){t.uploadPercent=0,t.uploading=!1,t.uploadFailed=!0,t.onError(i,e)}};r(l)},reset:function(){this.file=null,this.dataUrl="",this.errText="",this.fileName="",this.uploadPercent=0,this.uploading=!1,this.uploaded=!1,this.uploadFailed=!1}},watch:{imgSrc:function(e){this.dataUrl=e,e||(this.file=null,this.errText="",this.fileName="")},value:function(e,t){t&&!e&&this.reset()}}};function d(e,t,i,n,a,r,o,s,l,u){"boolean"!==typeof o&&(l=s,s=o,o=!1);var d,c="function"===typeof i?i.options:i;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,a&&(c.functional=!0)),n&&(c._scopeId=n),r?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=d):t&&(d=o?function(){t.call(this,u(this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(c.functional){var p=c.render;c.render=function(e,t){return d.call(t),p(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,d):[d]}return i}var c=d;const p=u;var h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"box",staticClass:"img-inputer",class:[e.themeClass,e.sizeClass,e.nhe||e.noHoverEffect?"nhe":"",{"img-inputer--loading":e.uploading}]},[e.ICON&&!e.customIconClass?i("i",{staticClass:"img-inputer__icon",class:"ico ico-"+e.ICON}):e._e(),e._v(" "),e.customIconClass?i("i",{staticClass:"img-inputer__icon",class:e.customIconClass}):e._e(),e._v(" "),e.icon||e.customIconClass?e._e():e._t("icon"),e._v(" "),i("p",{staticClass:"img-inputer__placeholder"},[e._v(e._s(e.placeholder))]),e._v(" "),e.imgSelected?i("div",{staticClass:"img-inputer__preview-box"},[i("img",{staticClass:"img-inputer__preview-img",attrs:{src:e.dataUrl}})]):e._e(),e._v(" "),i("label",{staticClass:"img-inputer__label",attrs:{for:e.readonly?"":e.inputId}}),e._v(" "),i("transition",{attrs:{name:"vip-fade"}},[e.uploading?i("div",{staticClass:"img-inputer__loading"},[i("div",{staticClass:"img-inputer__loading-indicator"}),e._v(" "),i("div",{staticClass:"img-inputer__loading-process",style:e.processStyle})]):e._e()]),e._v(" "),i("transition",{attrs:{name:"vip-zoom-in"}},[e.autoUpload&&e.uploaded?i("div",{staticClass:"img-inputer__state success"}):e._e()]),e._v(" "),i("transition",{attrs:{name:"vip-zoom-in"}},[e.autoUpload&&e.uploadFailed?i("div",{staticClass:"img-inputer__state fail"}):e._e()]),e._v(" "),e.imgSelected&&!e.noMask?i("div",{staticClass:"img-inputer__mask"},[i("p",{staticClass:"img-inputer__file-name"},[e._v(e._s(e.fileName))]),e._v(" "),e.readonly?i("p",{staticClass:"img-inputer__change"},[e._v(e._s(e.readonlyTipText))]):i("p",{staticClass:"img-inputer__change"},[e._v(e._s(e.bottomText))])]):e._e(),e._v(" "),e.capture?i("input",e._b({ref:"inputer",staticClass:"img-inputer__inputer",attrs:{type:"file",name:e.name,id:e.inputId,accept:e.accept,capture:"video"},on:{change:e.handleFileChange}},"input",e.$attrs,!1)):i("input",e._b({ref:"inputer",staticClass:"img-inputer__inputer",attrs:{type:"file",name:e.name,id:e.inputId,accept:e.accept},on:{change:e.handleFileChange}},"input",e.$attrs,!1)),e._v(" "),i("transition",{attrs:{name:"vip-move-in"}},[e.errText.length?i("div",{staticClass:"img-inputer__err"},[e._v(e._s(e.errText))]):e._e()])],2)},f=[];const g=void 0,m=void 0,v=void 0,_=!1;var y=c({render:h,staticRenderFns:f},g,p,m,_,v,void 0,void 0);t["a"]=y}}]);